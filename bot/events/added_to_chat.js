import { Chat } from "../../models/index.js";
import { bot, botAccount } from "../bot.js";
import { sendMessage, updateAdministrators } from "../../utils.js";

bot.on("new_chat_members", async (event) => {
  const chatObj =
    (await Chat.findById(event.chat.id)) ||
    new Chat({
      _id: event.chat.id,
      title: event.chat.title,
    });
  await updateAdministrators(chatObj);
  if (event.new_chat_members[0].id != botAccount.id) {
    return;
  }
  await sendMessage(
    event.chat.id,
    "–ü—Ä–∏–≤–µ—Ç! üëã\n\n–Ø –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ –º—É—Ç –∏–ª–∏ –±–∞–Ω –Ω–∞—Ä—É—à–∏—Ç–µ–ª—è, –µ—Å–ª–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ –Ω–µ—Ç—É –≤ —á–∞—Ç–µ.\n\n<b>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n/votemute - –Ω–∞—á–∏–Ω–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –Ω–∞ –º—É—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∞, —á—Ç–æ–±—ã –∫–æ–º–∞–Ω–¥–∞ —Å—Ä–∞–±–æ—Ç–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω—É–∂–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞.\n/voteban - –Ω–∞—á–∏–Ω–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –±–∞–Ω —É—á–∞—Å—Ç–Ω–∏–∫–∞, —á—Ç–æ–±—ã –∫–æ–º–∞–Ω–¥–∞ —Å—Ä–∞–±–æ—Ç–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω—É–∂–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞.\n/vanish - –º—É—Ç–∏—Ç –≤–∞—Å –Ω–∞ 60 —Å–µ–∫—É–Ω–¥\n\n–ß—Ç–æ–±—ã —è –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–∞–¥–æ –≤—ã–¥–∞—Ç—å –º–Ω–µ –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞."
  );
});
